<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>SAM Application Configurations - Microchip MPLAB Harmony USB Bootloader Applications help</title> <link rel="shortcut icon" href="../../favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="../../assets/css/just-the-docs.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2724382-16"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', "UA-2724382-16"); </script> <script type="text/javascript" src="../../assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="../../assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>SAM Application Configurations | Microchip MPLAB Harmony USB Bootloader Applications help</title> <meta name="generator" content="Jekyll v3.8.7" /> <meta property="og:title" content="SAM Application Configurations" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Harmony 3 USB Bootloader Applications package" /> <meta property="og:description" content="Harmony 3 USB Bootloader Applications package" /> <link rel="canonical" href="../../apps/docs/readme_configure_application_sam.html" /> <meta property="og:url" content="../../apps/docs/readme_configure_application_sam.html" /> <meta property="og:site_name" content="Microchip MPLAB Harmony USB Bootloader Applications help" /> <script type="application/ld+json"> {"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"../../assets/images/vendor/microchip_mplab_harmony_logo_150_transparent.png"}},"@type":"WebPage","url":"../../apps/docs/readme_configure_application_sam.html","headline":"SAM Application Configurations","description":"Harmony 3 USB Bootloader Applications package","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="link" viewBox="0 0 16 16"> <title>Link</title> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path> </symbol> </svg> <div class="page-wrap"> <div class="side-bar"> <div class="site-header"> <a href="../../index.html" class="site-title lh-tight"> <div class="site-logo"></div> </a> <button class="menu-button fs-3 js-main-nav-trigger" data-text-toggle="Hide" type="button">Menu</button> </div> <div class="navigation main-nav js-main-nav"> <nav role="navigation" aria-label="Main navigation"> <ul class="navigation-list"><li class="navigation-list-item"><a href="../../index.html" class="navigation-list-link">USB Bootloader Applications</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="../../apps/usb_device_hid_bootloader/readme.html" class="navigation-list-link">USB Device HID Bootloader</a></li><li class="navigation-list-item "><a href="../../apps/usb_host_msd_bootloader/readme.html" class="navigation-list-link">USB Host MSD Bootloader</a></li></ul></li><li class="navigation-list-item active"><a href="../../apps/docs/readme_configure_application.html" class="navigation-list-link">Application Configurations</a><ul class="navigation-list-child-list "><li class="navigation-list-item active"><a href="../../apps/docs/readme_configure_application_sam.html" class="navigation-list-link active">SAM Application Configurations</a></li><li class="navigation-list-item "><a href="../../apps/docs/readme_configure_application_pic32m.html" class="navigation-list-link">PIC32M Application Configurations</a></li></ul></li><li class="navigation-list-item"><a href="../../release_notes.html" class="navigation-list-link">Release notes</a></li><li class="navigation-list-item"><a href="../../mplab_harmony_license.html" class="navigation-list-link">License</a></li></ul> </nav> </div> <footer class="site-footer"> <p class="text-small text-grey-dk-000 mb-4">This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</p> </footer> </div> <div class="main-content-wrap js-main-content" tabindex="0"> <div class="main-content"> <div class="page-header js-page-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" class="js-search-input search-input" tabindex="0" placeholder="Search Microchip MPLAB Harmony USB Bootloader Applications help" aria-label="Search Microchip MPLAB Harmony USB Bootloader Applications help" autocomplete="off"> <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg> </div> <div class="js-search-results search-results-wrap"></div> </div> <ul class="list-style-none text-small aux-nav"> <li class="d-inline-block my-0"><a href="https://support.microchip.com">Obtain Support from Microchip</a></li> </ul> </div> <div class="page"> <nav class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="../../apps/docs/readme_configure_application.html">Application Configurations</a></li> <li class="breadcrumb-nav-list-item"><span>SAM Application Configurations</span></li> </ol> </nav> <div id="main-content" class="page-content" role="main"> <p><a href="https://www.microchip.com"><img src="https://www.microchip.com/ResourcePackages/Microchip/assets/dist/images/logo.png" alt="MCHP" /></a></p> <h1 id="configuring-a-sam-based-application-to-be-bootloaded"> <a href="#configuring-a-sam-based-application-to-be-bootloaded" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Configuring a SAM based Application to be bootloaded </h1> <h2 id="application-settings-in-mhc-system-configuration"> <a href="#application-settings-in-mhc-system-configuration" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Application Settings in MHC System Configuration </h2> <ol> <li>Launch MHC for the application project to be configured</li> <li> <p>Select <strong>system</strong> component from the project graph and configure the below highlighted settings</p> <p><img src="../../apps/docs/images/application_config_mhc_setting.png" alt="application_config_mhc_setting" /></p> </li> <li><strong>Disable Fuse Settings:</strong> <ul> <li>Fuse settings needs to be disabled for the application which will be boot-loaded as the fuse settings are supposed to be programmed through programming tool from bootloader code</li> <li>Also the fuse settings are not programmable through firmware</li> <li>Enabling the fuse settings also increases the size of the binary when generated through the hex file</li> </ul> </li> <li><strong>Specify the Application Start Address:</strong> <ul> <li>Specify the Start address from where the application will run under the <strong>Application Start Address (Hex)</strong> option in System block in MHC.</li> <li>This value should be equal to or greater than the bootloader size and must be aligned to the erase unit size on that device.</li> <li>As this value will be used by bootloader to Jump to application at device reset it should match the value provided to bootloader code</li> <li>The <strong>Application Start Address (Hex)</strong> will be used to generate XC32 compiler settings to place the code at intended address</li> <li>After the project is regenerated, the ROM_ORIGIN and ROM_LENGTH are the XC32 linker variables which will be overridden with value provided for <strong>Application Start Address (Hex)</strong> and can be verified under Options for xc32-ld in Project Properties in MPLABX IDE as shown below.</li> </ul> <p><img src="../../apps/docs/images/application_config_xc32_ld_rom.png" alt="application_config_xc32_ld_rom" /></p> </li> </ol> <h2 id="mplab-x-settings"> <a href="#mplab-x-settings" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> MPLAB X Settings </h2> <h3 id="for-bootloading-the-application-with-usb_device_hid_bootloader"> <a href="#for-bootloading-the-application-with-usb_device_hid_bootloader" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> For Bootloading the application with usb_device_hid_bootloader </h3> <ul> <li> <p>Check the <strong>Normalize hex file</strong> option as shown below, as the Unified bootloader host application takes hex file as an input. Normalizing the hex file will make sure the data in the hex file is arranged sequentially</p> <p><img src="../../apps/docs/images/application_config_normalize_hex.png" alt="application_config_normalize_hex" /></p> </li> </ul> <h3 id="for-bootloading-the-application-with-usb_host_msd_bootloader"> <a href="#for-bootloading-the-application-with-usb_host_msd_bootloader" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> For Bootloading the application with usb_host_msd_bootloader </h3> <ul> <li> <p>Specifying post build option to automatically generate the binary file from hex file once the build is complete</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>${MP_CC_DIR}/xc32-objcopy -I ihex -O binary ${DISTDIR}/${PROJECTNAME}.${IMAGE_TYPE}.hex ${DISTDIR}/${PROJECTNAME}.${IMAGE_TYPE}.bin
</code></pre></div> </div> <p><img src="../../apps/docs/images/application_config_post_build_script.png" alt="application_config_post_build_script" /></p> </li> </ul> <h2 id="additional-settings-optional"> <a href="#additional-settings-optional" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Additional settings (Optional) </h2> <ul> <li><strong>RAM_ORIGIN</strong> and <strong>RAM_LENGTH</strong> values should be provided for reserving configured bytes of start of RAM to trigger bootloader from firmware</li> <li>Under Project Properties, expand options for xc32-ld and define the values for <strong>RAM_ORIGIN</strong> and <strong>RAM_LENGTH</strong> under Additional options</li> <li> <p>This is optional and can be ignored if not required</p> <p><img src="../../apps/docs/images/application_config_xc32_ld_ram.png" alt="application_config_xc32_ld_ram" /></p> </li> </ul> <hr> <footer role="contentinfo"> <p class="text-small text-grey-dk-000 mb-0"><img src='../../assets/images/vendor/microchip_logo.png' /><br /> Copyright &copy; 2020 Microchip Technology.</p> </footer> </div> </div> </div> </div> </body> </html>
